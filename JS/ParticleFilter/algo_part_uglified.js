(function(){var a,b,c,d,e,f,g,h,i;f=99999,a=function(){function a(a,b,c){this.data=a,this.init=b,this.goal=c,this.height=this.data.length,this.width=this.data[0].length,this.delta=[[0,-1],[-1,0],[0,1],[1,0]],this.deltaName=["up","left","down","right"],this.cost=1}return a.prototype.heuristicsFuncs=function(a,c){var d,e,f;f=[c.x,c.y],d=f[0],e=f[1];switch(a){case 1:return b(c,this.goal);case 2:return Math.abs(d-this.goal.x)+Math.abs(e-this.goal.y);case 3:return Math.abs(d-this.goal.x)*Math.abs(e-this.goal.y);default:return 0}},a.prototype.search=function(a){var c,g,i,j,k,l,m,n,o,q,r,s,t,u,v,w,x,y,z,A,B,C,D;a==null&&(a=0),i=e(this.width,this.height,0),i[this.init.y][this.init.x]=1,u=[[0,this.init,b(this.init,this.goal)]],m=!1,w=!1,k=e(this.width,this.height,f),g=e(this.width,this.height,-1),v=e(this.width,this.height,""),x=0;while(!m&&!w)if(u.length===0)w=!0;else{u.sort(function(a,b){return a[0]-b[0]}),u.reverse(),t=u.pop(),z=t[1],n=t[2],k[z.y][z.x]=x,x+=1;if(d(z,this.goal))m=!0;else{D=this.delta;for(s=0,C=D.length;s<C;s++)j=D[s],y=z.x+j[0],B=z.y+j[1],y>=0&&y<this.width&&B>=0&&B<this.height&&i[B][y]===0&&this.data[B][y]!=="wall"&&(A=h(y,B),r=a>0?this.heuristicsFuncs(a,A):0,o=n+this.cost,q=o+r,u.push([q,A,o]),i[B][y]=1,g[B][y]=s)}}z=this.goal,l=!1;while(!d(z,this.init)&&!l){c=g[z.y][z.x];if(c===-1){l=!0;break}y=z.x-this.delta[c][0],B=z.y-this.delta[c][1],z=h(y,B);if(d(z,this.init))break;v[B][y]=this.deltaName[c]}return l&&(v=e(this.width,this.height,"")),[k,v,l]},a.prototype.optimum_policy=function(a,b){var c,i,j,k,l,m,n,o,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;a==null&&(a={f:1,l:0,r:0,b:0}),b==null&&(b=100),z=0;for(q in a)A=a[q],z+=A;if(z!==0)for(q in a)A=a[q],a[q]=A/z;else a={f:1,l:0,r:0,b:0};C=e(this.width,this.height,f),u=e(this.width,this.height,""),l=!0;while(l){l=!1,L=this.data;for(H=0,I=L.length;H<I;H++){w=L[H];for(E=0,J=w.length;E<J;E++){k=w[E],F=h(E,H);if(d(F,this.goal))C[H][E]>0&&(C[H][E]=0,l=!0);else if(k===""){M=this.delta;for(o=0,K=M.length;o<K;o++)m=M[o],D=E+m[0],G=H+m[1],D>=0&&D<this.width&&G>=0&&G<this.height&&this.data[G][D]!=="wall"&&(n=C[G][D]*a.f,s=E+this.delta[g(o+1,4)][0],t=H+this.delta[g(o+1,4)][1],r=0,s>=0&&s<this.width&&t>=0&&t<this.height&&this.data[t][s]!=="wall"?C[t][s]<f&&(r=C[t][s]*a.l):r=b*a.l,x=E+this.delta[g(o-1,4)][0],y=H+this.delta[g(o-1,4)][1],v=0,x>=0&&x<this.width&&y>=0&&y<this.height&&this.data[y][x]!=="wall"?C[y][x]<f&&(v=C[y][x]*a.r):v=b*a.r,i=E+this.delta[g(o+2,4)][0],j=H+this.delta[g(o+2,4)][1],c=0,i>=0&&i<this.width&&j>=0&&j<this.height&&this.data[j][i]!=="wall"?C[j][i]<f&&(c=C[j][i]*a.b):c=b*a.b,B=n+v+r+c+this.cost,B<C[H][E]&&(l=!0,u[H][E]=this.deltaName[o],C[H][E]=B))}}}}return[C,u,!1]},a}(),e=function(a,b,d){var e,f,g,h;h=[];for(f=1,g=Math.floor(b);1<=g?f<=g:f>=g;1<=g?f++:f--)h.push(function(){var b,f;f=[];for(e=1,b=Math.floor(a);1<=b?e<=b:e>=b;1<=b?e++:e--)f.push(d!=null?d:c());return f}());return h},c=function(a,b){return a==null&&(a=""),b==null&&(b=f),{policy:a,value:b}},b=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},h=function(a,b){return{x:a,y:b}},d=function(a,b){return a.x===b.x&&a.y===b.y},g=function(a,b){return a%b+(a<0?b:0)},i=typeof exports!="undefined"&&exports!==null?exports:this,i.SearchAlgos=a}).call(this)